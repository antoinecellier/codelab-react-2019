import { Head, Appear, Notes } from 'mdx-deck'
import { Split } from 'mdx-deck/layouts'
export { components } from "mdx-deck-code-surfer"
export { default as theme } from './theme'


<Head>
  <title>D√©velopper une application React en 2019</title>
</Head>

# D√©velopper une application React en 2019

---

export default Split

<section>

![](https://avatars1.githubusercontent.com/u/5922848?s=800&v=4)

### Antoine Cellier

D√©veloppeur Front-End
[@ZenikaNantes](https://twitter.com/ZenikaNantes)

[@antoinecellier3](https://twitter.com/antoinecellier3)

</section>

<section>

![](https://avatars1.githubusercontent.com/u/3855602?s=300&v=4)

### Valentin Cocaud

D√©veloppeur
[@ZenikaNantes](https://twitter.com/ZenikaNantes)

[@ragorn44](https://twitter.com/ragorn44)

</section>

---

## Programme

- Pr√©sentation des nouveaut√©es React: Hooks et API Context (15 min) üé§

- Codelab (1h45) üíª

- Pizzas & boissons üçïüçª

---

# Hooks

---

- Les pr√©mices `mixins`, `hoc`, `renderProps`
- Surcharge de l'arbre de composants

---
```jsx
  <Connect>
    {state => (
      <>
        <p>Vous avez cliqu√© {state.count} fois</p>
        <Connect>
          {(state, dispatch) =>
            <button onClick={() => dispatch(setCount(count + 1))}>
              Cliquez ici
            </button>
          }
        </Connect>
      </>
    )}
  <Connect/>
```

---

- Disponibles depuis la version 16.8.0
- R√©utiliser la logique: hook custom
- G√©rer plus facilement l'√©tat: `useState` 
- S'abstraire de certaines m√©caniques comme le cycle de vie: `useEffect`

---

# Hooks - useState

---

```jsx
import React, { useState } from 'react';

const Counter = () =>  {
  const [count, setCount] = useState(0);

  return (
    <>
      <p>Vous avez cliqu√© {count} fois</p>
      <button onClick={() => setCount(count + 1)}>
        Cliquez ici
      </button>
    </>
  );
}
----
*
4 > initialisation d'un √©tat local 
8 > affichage de l'√©tat
9 > mise √† jour de l'√©tat local
*
```

---

# Hooks - useEffect

---

```jsx
import React, { useState, useEffect } from 'react';

const Counter = () => {
  const [count, setCount] = useState(0);

  // Similaire √† componentDidMount et componentDidUpdate :
  useEffect(() => {
    console.log(count)
  }, [count]); // Appel seulement si la valeur de count change

  return (
    <div>
      <p>Vous avez cliqu√© {count} fois</p>
      <button onClick={() => setCount(count + 1)}>
        Cliquez ici
      </button>
    </div>
  );
}
----
*
4 > initialisation d'un √©tat 
6,7,8,9 > `log` du `count` √† chaque fois que le composant est rerendu et que sa valeur change
14 > Mise √† jour de l'√©tat
8 > appel de `useEffect`
*
```

---

# Hooks - useReducer

---

```jsx
const initialState = {count: 0};

function reducer(state, action) {
  switch (action.type) {
    case 'increment':
      return {count: state.count + 1};
    case 'decrement':
      return {count: state.count - 1};
    default:
      throw new Error();
  }
}

const Counter = () => {
  const [state, dispatch] = useReducer(reducer, initialState);
  return (
    <>
      Total : {state.count}
      <button onClick={() => dispatch({type: 'decrement'})}>-</button>
      <button onClick={() => dispatch({type: 'increment'})}>+</button>
    </>
  );
}
----
*
1 > initialisation d'un √©tat 
3,4,5,6,7,8,9,10,11,12 > impl√©mentation du reducer
15 > useReducer
19 > dispatch d'une action
7,8 > calcul du nouvel √©tat
18 > affichage de l'√©tat mis √† jour
*
```

---

# Context

---

* React a toujours eu un contexte (non document√©)
* 29 mars 2018: [React v16.3.0: New lifecycles and context API](https://reactjs.org/blog/2018/03/29/react-v-16-3.html)
* 23 octobre 2018: [React v16.6.0: lazy, memo and contextType](https://reactjs.org/blog/2018/10/23/react-v-16-6.html)

---

- Mettre √† disposition une valeur n'importe o√π dans l'arbre de composants
- Utilisation du pattern `Provider` / `Consumer`
- *Cas d'utilisation* : maintenir des √©tats globaux, mettre √† disposition de la config

---

```jsx
const ThemeContext= React.createContext('light')

const App = () => {
  <ThemeContext.Provider value='dark'>
    <Toolbar />
  </ThemeContext.Provider>
} 

const Toolbar = () => {
  <ThemeContext.Consumer>
    {theme => <Button theme={theme} />}
  </ThemeContext.Consumer>
}
----
*
1 > initialisation du context avec une valeur par d√©faut "light"
3,4,5,6,7 > Le provider met √† disposition le context pour ses enfants
8,9,10,11,12 > Composant Consumer qui permet de consommer le context gr√¢ce √† une renderProps
*
```

---

# Codelab

---

- D√©veloppez une application en utilisant les `hooks` et l'api `context`
- Biblioth√®que tierce utilis√©e: react-router-dom (on a menti)

https://antoinecellier.github.io/codelab-react-2019

---

# Questions
